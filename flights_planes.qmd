---
title: "'nycflights13' ë³´ê³ ì„œ"
title-slide-attributes: 
  data-background-image: images/ua_dep.png
  data-background-size: cover
  data-background-opacity: "0.5"  # ë°°ê²½ íˆ¬ëª…ë„ ì¡°ì ˆ
  data-font-size: 48px  # ðŸ”¥ ê¸°ë³¸ ê¸€ìž í¬ê¸° ì¡°ì ˆ (ì œëª©, ë¶€ì œëª©, ì €ìž í¬í•¨)
author: "Team F5 : ì •ì˜ì£¼, í•œì§€ìˆ˜, ì‹ íƒœì„ "
subtitle: "UA í•­ê³µì˜ ì œì¡°ì‚¬ë³„ ì¶œë°œ ì§€ì—° ë¶„ì„"
format:
  revealjs:
    footer: "Â© 2025 Team F5"
    logo: "images/logo.png"
    slide-number: true
    theme: night  # ë‚´ìž¥ í…Œë§ˆ ì ìš©
css: styles.css  # ðŸ”¥ CSS íŒŒì¼ ì ìš©
---

# ë³´ê³ ì„œ ì£¼ì œ : ì œì¡°ì‚¬ë³„ ê¸°ì²´ ê²°í•¨ìœ¼ë¡œ ì¸í•œ ìš´í•­ ì§€ì—° ë¶„ì„ ë³´ê³ ì„œ

# 1. ê°œìš”

 ëª©ì  : ìš°ë¦¬ëŠ” í•­ê³µì‚¬ë¡œì„œ ë¹„í–‰ê¸° ìš´í•­ì˜ ì‹ ë¢°ì„±ê³¼ ì •ì‹œì„±ìœ¼ ì¤‘ìš”í•˜ê²Œ ê³ ë ¤í•´ì•¼í•©ë‹ˆë‹¤.
 ìµœê·¼ ìš´í•­ ì§€ì—°ì´ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ê³  ìžˆìŠµë‹ˆë‹¤.
 ë‹¤ì–‘í•œ ìš”ì¸ì´ ìžˆì„ ìˆ˜ ìžˆì§€ë§Œ, ê¸°ì²´ ê²°í•¨ ë° ë¶€í’ˆ ë¬¸ì œê°€ ì§€ì—°ì˜ ì£¼ìš” ì›ì¸ ì¤‘ í•˜ë‚˜ë¼ëŠ” ë‚´ë¶€ ë³´ê³ ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.
 ì´ì— ë”°ë¼ ì œì¡°ì‚¬ë³„ ê¸°ì²´ì˜ ìš´í•­ ì§€ì—° íŒ¨í„´ì„ ë¶„ì„í•˜ê³ , íŠ¹ì • ì œì¡°ì‚¬ì˜ ê¸°ì²´ì—ì„œ ì§€ì—°ì´ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ëŠ”ì§€ íŒŒì•…í•˜ì—¬ ìš´ì˜ íš¨ìœ¨ì„±ì„ ê°œì„ í•˜ê³ ìž í•©ë‹ˆë‹¤.

# ë¶„ì„ ëª©í‘œ :
 ì œì¡°ì‚¬ë³„ ìš´í•­ ì§€ì—° íŒ¨í„´ ë¶„ì„: ì–´ë–¤ ì œì¡°ì‚¬ì˜ ê¸°ì²´ê°€ ì§€ì—°ì„ ìžì£¼ ìœ ë°œí•˜ëŠ”ì§€ í™•ì¸.

# 2. ë°ì´í„° ë¶„ë¹„ ë° ì „ì²˜ë¦¬

2.1 ì‚¬ìš©í•˜ëŠ” Python ë¼ì´ë¸ŒëŸ¬ë¦¬

```{python}
import pandas as pd
import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt

from nycflights13 import flights, planes
```

```{python}
flights.info()
planes.info()
```



# 2.2 ë°ì´í„° ë³‘í•©

- ë‘ ë°ì´í„°ë¥¼ tailnum(ê¸°ì²´ ë“±ë¡ë²ˆí˜¸) ê¸°ì¤€ìœ¼ë¡œ ë³‘í•©í•˜ì—¬ ê¸°ì²´ë³„ ì œì¡°ì‚¬ ì •ë³´ë¥¼ ê²°í•©
```{python}
# tailnumì„ keyë¡œ merge í•˜ê¸° 
df = pd.merge(flights, planes, on = 'tailnum', how='left')
df.info()
```

# 2.2 ë‚ ì§œ ë° ì‹œê°„ ë°ì´í„° ìƒì„± 
ì—°(year_x), ì›”(month), ì¼(day), ì‹œ(hour), ë¶„(minute) ë°ì´í„°ë¥¼ ì¡°í•©í•˜ì—¬ date_time ìƒì„±
2013ë…„ 1ì›”~6ì›”(ìƒë°˜ê¸°) ë°ì´í„°ë¥¼ í•„í„°ë§
```{python}
df['date_time'] = pd.to_datetime(df['year_x'].astype(str) + '-' + df['month'].astype(str) + '-' + df['day'].astype(str) + ' ' + df['hour'].astype(str) + ':' + df['minute'].astype(str))
df_fh = df[(df['date_time'] >= '2013-01-01') & (df['date_time'] <= '2013-06-30')]
```


# 2.3 ì§€ì—°ì‹œê°„ ê´€ë ¨ ì „ì²˜ë¦¬
 ìŒìˆ˜ ë„ì°© ì§€ì—° ì‹œê°„ ì œê±° (ë¹ ë¥¸ ì´ë¥™ì€ ì§€ì—° ì›ì¸ì´ ì•„ë‹ˆë¯€ë¡œ ë¶„ì„ ì œì™¸)
 ì œì¡°ì‚¬ë³„ ìš´í•­ íšŸìˆ˜ í™•ì¸
 ìš°ë¦¬ëŠ” ìš´í•­ì´ ê°€ìž¥ ë§Žì€ í•­ê³µì‚¬ì•¼ ìš°ë¦¬ í•­ê³µì‚¬ë¥¼ ê³¨ë¼ì¤˜ 

 - í•­ê³µì‚¬ë³„ ìš´í•­ íšŸìˆ˜ ì§‘ê³„
 ```{python}
 top_airline = df_fh['carrier'].value_counts().idxmax()  # ìš´í•­ íšŸìˆ˜ê°€ ê°€ìž¥ ë§Žì€ í•­ê³µì‚¬ ì„ íƒ

df_fh_our_airline = df_fh[df_fh['carrier'] == top_airline]  # ìš°ë¦¬ í•­ê³µì‚¬ì˜ ë°ì´í„°ë§Œ í•„í„°ë§
df_fh_our_airline = df_fh_our_airline[df_fh_our_airline['dep_delay'] >= 0]  # ìŒìˆ˜ ì œê±°
```


# ìš°ë¦¬ í•­ê³µì‚¬ì˜ ìƒìœ„ 5ê°œ ì œì¡°ì‚¬ ì„ ì •
top_5_manufacturers = df_fh_our_airline['manufacturer'].value_counts().head(5).index

# ì–´ì°¨í”¼ 3ê°œë°–ì— ì•ˆì“°ëŠ”êµ¬ë‚˜ 
set(df_fh_our_airline['manufacturer'])

# ì œì¡°ì‚¬ë³„ ìš´í•­ íšŸìˆ˜ ì§‘ê³„
manufacturer_counts = df_fh_our_airline['manufacturer'].value_counts()

# ì›í˜• ê·¸ëž˜í”„ (íŒŒì´ ì°¨íŠ¸) ìƒì„±
plt.figure(figsize=(8, 8))
plt.pie(manufacturer_counts, labels=manufacturer_counts.index, autopct='%1.1f%%', startangle=140, colors=sns.color_palette('pastel'))
plt.title('Aircraft Manufacturer Distribution for Our Airline')
plt.show()

# 3. ì œì¡°ì‚¬ë³„ ìš´í•­ ì§€ì—° ë¶„ì„
# 3.1 ì œì¡°ì‚¬ë³„ í‰ê·  ì§€ì—° ì‹œê°„

# ì´ìƒì¹˜ ì œê±°ë¥¼ ìœ„í•œ IQR(Interquartile Range) ê³„ì‚°
Q1 = df_fh_our_airline['dep_delay'].quantile(0.25)
Q3 = df_fh_our_airline['dep_delay'].quantile(0.75)
IQR = Q3 - Q1

# ì •ìƒ ë²”ìœ„ ì„¤ì • (IQR ë²”ìœ„ ë‚´ ë°ì´í„°ë§Œ ìœ ì§€)
lower_bound = Q1 - 1.5 * IQR
upper_bound = Q3 + 1.5 * IQR

# ì´ìƒì¹˜ ì œê±°
df_fh_our_airline = df_fh_our_airline[(df_fh_our_airline['dep_delay'] >= lower_bound) & (df_fh_our_airline['dep_delay'] <= upper_bound)]


# - ì œì¡°ì‚¬ë³„ í‰ê·  ì§€ì—° ì‹œê°„ ë° í‘œì¤€íŽ¸ì°¨ í™•ì¸
df_fh_our_airline.groupby('manufacturer')['dep_delay'].describe()

# 3.2 ì œì¡°ì‚¬ë³„ ìš´í•­ íšŸìˆ˜ ëŒ€ë¹„ ì§€ì—° ë¹„ìœ¨
# - ë‹¨ìˆœ í‰ê·  ì§€ì—° ì‹œê°„ ë¹„êµê°€ ì•„ë‹Œ, ìš´í•­ íšŸìˆ˜ ëŒ€ë¹„ ì§€ì—° ë°œìƒ ë¹„ìœ¨ ê³„ì‚°
delay_rate = df_fh_our_airline.groupby('manufacturer')['dep_delay'].count() /df_fh_our_airline['manufacturer'].value_counts()

delay_rate.sort_values(ascending=False)


# 3.3 ì œì¡°ì‚¬ë³„ ì´ë¥™ vs. ë„ì°© ì§€ì—° ë¹„êµ
# - íŠ¹ì • ì œì¡°ì‚¬ì˜ ê¸°ì²´ì—ì„œ ì´ë¥™ ì§€ì—°ì´ ë§Žì€ì§€, ìš´í•­ ì¤‘ ì¶”ê°€ ì§€ì—°ì´ ë°œìƒí•˜ëŠ”ì§€ ë¶„ì„
df_fh_our_airline.groupby('manufacturer')[['dep_delay']].mean()


# 3.4 ì›”ë³„ ì§€ì—° íŒ¨í„´ ë¶„ì„
# - ì œì¡°ì‚¬ë³„ ì›”ë³„ í‰ê·  ë„ì°© ì§€ì—° ë¶„ì„
df_fh_our_airline['month'] = df_fh_our_airline['date_time'].dt.month
monthly_delay = df_fh_our_airline.groupby(['manufacturer', 'month'])['arr_delay'].mean().unstack()
monthly_delay


plt.figure(figsize=(12,10))
monthly_delay = df_fh_our_airline.groupby(['manufacturer', 'month'])['dep_delay'].mean().unstack()

sns.lineplot(data=monthly_delay.T, marker="o")
plt.xlabel("Month")
plt.ylabel("Average Delay (minutes)")
plt.title("Monthly Average Delay by Manufacturer")
plt.legend(title="Manufacturer")
plt.grid(True)
plt.show()

# 4. ë°ì´í„° ì‹œê°í™”
# 4.1 ì œì¡°ì‚¬ë³„ ë„ì°© ì§€ì—° ì‹œê°„ ë¶„í¬ 

# ì œì¡°ì‚¬ë³„ í‰ê·  ì§€ì—° ì‹œê°„ ë¹„êµ
mean_delays = df_fh_our_airline.groupby('manufacturer')['dep_delay'].mean().sort_values()

plt.figure(figsize=(10,5))
mean_delays.plot(kind='bar', color='skyblue')
plt.xlabel('Manufacturer')
plt.ylabel('Mean Departure Delay (minutes)')
plt.title('Mean Departure Delay by Manufacturer (Jan-Jun 2013)')
plt.grid(True)
plt.show()

# 4.2 ì œì¡°ì‚¬ë³„ ì´ë¥™ vs. ë„ì°© ì§€ì—° ë¹„êµ (ê°€ë¡œ ë§‰ëŒ€ ê·¸ëž˜í”„)
delay_comparison = df_fh_our_airline.groupby('manufacturer')[['dep_delay', 'arr_delay']].mean()

delay_comparison.plot(kind='barh', figsize=(12,6), color=['royalblue', 'tomato'])
plt.xlabel('Mean Delay (minutes)')
plt.ylabel('Manufacturer')
plt.title('Mean Departure vs. Arrival Delay by Manufacturer (Jan-Jun 2013)')
plt.legend(['Departure Delay', 'Arrival Delay'])
plt.grid(True)
plt.show()



# 4.3 3ì°¨ì› ë°ì´í„° ë¶„ì„ì„ í†µí•´ì„œ ë³´ê¸° 
# ì œì¡°ì‚¬ë³„ í‰ê·  ì´ë¥™ ì§€ì—°, ë„ì°© ì§€ì—° ë° ìš´í–‰ ëŒ€ìˆ˜ ë°ì´í„° ì¤€ë¹„
delay_comparison = df_fh_our_airline.groupby('manufacturer')[['dep_delay', 'arr_delay']].mean()
manufacturer_flight_counts = df_fh_our_airline['manufacturer'].value_counts()

# ë°ì´í„° ë³‘í•©
delay_comparison['flight_count'] = manufacturer_flight_counts

# 3D ê·¸ëž˜í”„ ìƒì„±
fig = plt.figure(figsize=(12, 8))
ax = fig.add_subplot(111, projection='3d')

# x, y, z ì¢Œí‘œ ì„¤ì •
x_labels = delay_comparison.index  # ì œì¡°ì‚¬ ëª©ë¡
x = np.arange(len(x_labels))  # xì¶• ì¸ë±ìŠ¤ (ì œì¡°ì‚¬ë³„)
y_dep = delay_comparison['dep_delay']  # ì´ë¥™ ì§€ì—°
y_arr = delay_comparison['arr_delay']  # ë„ì°© ì§€ì—°
z = delay_comparison['flight_count']  # ìš´í–‰ ëŒ€ìˆ˜

# ë§‰ëŒ€ ë„ˆë¹„ ì„¤ì •
bar_width = 0.3

# 3D ë§‰ëŒ€ ê·¸ëž˜í”„ í˜•íƒœë¡œ ì‹œê°í™” (ì¡°ê¸ˆ ë” ì •êµí•œ ìŠ¤íƒ€ì¼ ì ìš©)
ax.bar(x - bar_width, y_dep, zs=z, zdir='y', color='royalblue', alpha=0.8, width=bar_width, label='Departure Delay')
ax.bar(x + bar_width, y_arr, zs=z, zdir='y', color='tomato', alpha=0.8, width=bar_width, label='Arrival Delay')

# ì¶• ì„¤ì • ë° ì‹œê°ì  ê°œì„ 
ax.set_xlabel('Manufacturer', fontsize=12, labelpad=15, color = 'red')
ax.set_ylabel('Total Flights Operated', fontsize=12, labelpad=15)
ax.set_zlabel('Mean Delay (minutes)', fontsize=12, labelpad=15)
ax.set_xticks(x)
ax.set_xticklabels(x_labels, rotation=45, fontsize=10, ha='right')
ax.set_title('3D Visualization of Mean Departure & Arrival Delay by Manufacturer', fontsize=14, pad=20)
ax.view_init(elev=20, azim=120)  # ì‹œì  ì¡°ì •

# ë²”ë¡€ ì¶”ê°€
ax.legend()

# ê·¸ëž˜í”„ ì¶œë ¥
plt.show()


# 5. ê²°ë¡  ë° ìš´ì˜ ê°œì„  ë°©ì•ˆ
